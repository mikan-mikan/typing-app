# 機能一覧

**最終更新日: 2026年01月30日**

## 主要機能

### 1. タイピングゲーム機能

#### 1.1 コース選択

- **単語コース**: 短い単語でのタイピング練習
- **文章コース**: 文章でのタイピング練習

#### 1.2 難易度設定

- **易しい**: 初心者向けの簡単な問題
- **普通**: 標準的な難易度
- **難しい**: 上級者向けの難しい問題

> **注**: 現在、難易度による問題の自動調整機能は未実装です。問題データは共通です。

#### 1.3 ローマ字入力システム

- **wanakanライブラリ**を使用した日本語⇔ローマ字変換
- ひらがな・カタカナ・漢字混じりの文章に対応
- リアルタイムでの入力判定

#### 1.4 正誤判定

- 入力中の文字がリアルタイムで正誤判定される
- 正しい入力: 緑色で表示
- 誤った入力: 赤色で表示 + "Miss" 表示

#### 1.5 カウントダウン機能

ゲーム開始前に3秒のカウントダウンを実行:

- 3 → 2 → 1 → START

---

### 2. スコア・記録機能

#### 2.1 経過時間の計測

- ゲーム開始から終了までの時間を計測（秒単位）
- `useGameTimer` フックで管理

#### 2.2 ミス回数のカウント

- タイピングミスの回数を記録
- ミスごとにペナルティとして合計時間に加算される

#### 2.3 スコア計算

**計算式**:

```
合計秒数 = 経過時間 + (ミス回数 × ミスペナルティ)
```

**スコアランク判定**:
| ランク | 基準 |
|--------|------|
| VeryFast | 合計秒数 ≤ 基準値1 |
| Fast | 合計秒数 ≤ 基準値2 |
| Normal | 合計秒数 ≤ 基準値3 |
| Slow | 合計秒数 ≤ 基準値4 |
| VerySlow | 上記以外 |

#### 2.4 スコアメッセージ

ランクに応じたメッセージを表示:

- VeryFast: 素晴らしいです！
- Fast: 速いです！
- Normal: 普通です
- Slow: 遅いです
- VerySlow: とても遅いです

---

### 3. 設定機能

#### 3.1 BGM設定

- ON/OFF切り替え
- 音量調整（0〜100）

> **注**: 実際の音楽再生機能は未実装です。設定値のみ保存されます。

#### 3.2 SE設定

- ON/OFF切り替え
- 音量調整（0〜100）

> **注**: 実際の効果音再生機能は未実装です。設定値のみ保存されます。

---

### 4. 状態管理機能

#### 4.1 画面遷移管理

- `CurrentScreenContext`で現在の画面を管理
- 画面間のスムーズな切り替え

#### 4.2 問題リスト管理

- `QuestionListContext`で問題データを管理
- コース・難易度に応じた問題の生成と保存

#### 4.3 スコア管理

- `ScoreContext`でスコア関連のデータを一元管理
  - 経過時間
  - ミス回数
  - 合計時間
  - スコアオブジェクト（ランクとメッセージ）

#### 4.4 コース・難易度管理

- `CourseLevelContext`で選択されたコースと難易度を保存
- ゲーム画面での表示に使用

#### 4.5 ユーザー設定管理

- `UserSettingContext`で音声設定を保存
- アプリ全体で設定を共有

---

### 5. UI/UX機能

#### 5.1 レスポンシブデザイン

- Tailwind CSSによるスタイリング
- 各種デバイスサイズに対応

#### 5.2 フォーカス管理

- ゲーム中は自動的に入力欄にフォーカス
- 画面クリック時も入力欄にフォーカスを維持
- 「やめる」ボタンなど特定要素はフォーカス対象外

#### 5.3 ボタンコンポーネント

- 再利用可能なボタンコンポーネント
- 統一されたデザインとホバーエフェクト

---

## 技術的な特徴

### 使用している主要技術

- **Next.js 16**: App Routerを使用
- **React 19**: 最新版のReact機能を活用
- **TypeScript**: 型安全な開発
- **Tailwind CSS v4**: ユーティリティファーストのスタイリング（`@tailwindcss/postcss`使用）
- **wanakana**: 日本語入力処理

### カスタムフック

効率的な開発のため、複数のカスタムフックを実装:

- `useGameLogic`: ゲームロジックの管理
- `useGameTimer`: 時間計測
- `useGoToPage`: 画面遷移
- `useHandleKeyDown`: キーボード入力処理
- `useUpdateQuestionList`: 問題リスト更新
- `useUpdateSelect`: 選択状態の更新

---

## 現在の制限事項

1. **問題データ**: 固定の10問のみ（`src/static/questions.ts`）
2. **難易度による問題の自動調整**: 未実装
3. **音声機能**: 設定UIのみで実際の再生機能は未実装
4. **ランキング機能**: 未実装
5. **問題数の設定**: 固定で3問（`QUESTION_NUMBER = 3`）
6. **ユーザー認証**: 未実装
7. **データ永続化**: ブラウザリロード時にデータがリセットされる

これらは今後の追加機能予定に含まれています。
